!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.striveneditor=e():t.striveneditor=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var o,i,l;i=[e],void 0===(l="function"==typeof(o=function(t){"use strict";function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=[".doc",".docx",".xls",".xlsx",".ppt",".pptx",".pdf",".tif",".jpeg",".jpg",".gif",".bmp",".txt",".csv",".png",".msg",".wav",".mp3",".mp4",".zip",".rtf",".eps",".ai",".psd",".avi",".mov",".wmv",".cfg",".wss",".vsd",".vsdx",".tsd",".lic"],i="fas",l={textDecoration:{menu:{viewBox:"0 0 1792 1792",d:"M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5 13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z"},group:[{bold:{viewBox:"0 0 1792 1792",d:"M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68 .5t68 .5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z"}},{italic:{viewBox:"0 0 1792 1792",d:"M384 1662l17-85q22-7 61.5-16.5t72-19 59.5-23.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z"}},{underline:{viewBox:"0 0 1792 1792",d:"M176 223q-37-2-45-4l-3-88q13-1 40-1 60 0 112 4 132 7 166 7 86 0 168-3 116-4 146-5 56 0 86-2l-1 14 2 64v9q-60 9-124 9-60 0-79 25-13 14-13 132 0 13 .5 32.5t.5 25.5l1 229 14 280q6 124 51 202 35 59 96 92 88 47 177 47 104 0 191-28 56-18 99-51 48-36 65-64 36-56 53-114 21-73 21-229 0-79-3.5-128t-11-122.5-13.5-159.5l-4-59q-5-67-24-88-34-35-77-34l-100 2-14-3 2-86h84l205 10q76 3 196-10l18 2q6 38 6 51 0 7-4 31-45 12-84 13-73 11-79 17-15 15-15 41 0 7 1.5 27t1.5 31q8 19 22 396 6 195-15 304-15 76-41 122-38 65-112 123-75 57-182 89-109 33-255 33-167 0-284-46-119-47-179-122-61-76-83-195-16-80-16-237v-333q0-188-17-213-25-36-147-39zm1488 1409v-64q0-14-9-23t-23-9h-1472q-14 0-23 9t-9 23v64q0 14 9 23t23 9h1472q14 0 23-9t9-23z"}},{strikethrough:{viewBox:"0 0 1792 1792",d:"M1760 896q14 0 23 9t9 23v64q0 14-9 23t-23 9h-1728q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h1728zm-1277-64q-28-35-51-80-48-98-48-188 0-181 134-309 133-127 393-127 50 0 167 19 66 12 177 48 10 38 21 118 14 123 14 183 0 18-5 45l-12 3-84-6-14-2q-50-149-103-205-88-91-210-91-114 0-182 59-67 58-67 146 0 73 66 140t279 129q69 20 173 66 58 28 95 52h-743zm507 256h411q7 39 7 92 0 111-41 212-23 56-71 104-37 35-109 81-80 48-153 66-80 21-203 21-114 0-195-23l-140-40q-57-16-72-28-8-8-8-22v-13q0-108-2-156-1-30 0-68l2-37v-44l102-2q15 34 30 71t22.5 56 12.5 27q35 57 80 94 43 36 105 57 59 22 132 22 64 0 139-27 77-26 122-86 47-61 47-129 0-84-81-157-34-29-137-71z"}}]},listOptions:{menu:{viewBox:"0 0 1792 1792",d:"M256 1312v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm-1536-1152v192q0 13-9.5 22.5t-22.5 9.5h-192q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h192q13 0 22.5 9.5t9.5 22.5zm1536 768v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1344q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1344q13 0 22.5 9.5t9.5 22.5z"},group:[{insertOrderedList:{viewBox:"0 0 1792 1792",d:"M381 1620q0 80-54.5 126t-135.5 46q-106 0-172-66l57-88q49 45 106 45 29 0 50.5-14.5t21.5-42.5q0-64-105-56l-26-56q8-10 32.5-43.5t42.5-54 37-38.5v-1q-16 0-48.5 1t-48.5 1v53h-106v-152h333v88l-95 115q51 12 81 49t30 88zm2-627v159h-362q-6-36-6-54 0-51 23.5-93t56.5-68 66-47.5 56.5-43.5 23.5-45q0-25-14.5-38.5t-39.5-13.5q-46 0-81 58l-85-59q24-51 71.5-79.5t105.5-28.5q73 0 123 41.5t50 112.5q0 50-34 91.5t-75 64.5-75.5 50.5-35.5 52.5h127v-60h105zm1409 319v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm-1408-899v99h-335v-99h107q0-41 .5-121.5t.5-121.5v-12h-2q-8 17-50 54l-71-76 136-127h106v404h108zm1408 387v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"}},{insertUnorderedList:{viewBox:"0 0 1792 1792",d:"M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm-1408-928q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5"}}]},textAlign:{menu:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45z"},group:[{indent:{viewBox:"0 0 1792 1792",d:"M352 832q0 14-9 23l-288 288q-9 9-23 9-13 0-22.5-9.5t-9.5-22.5v-576q0-13 9.5-22.5t22.5-9.5q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1088q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5h-1728q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1728q13 0 22.5 9.5t9.5 22.5z"}},{justifyLeft:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"}},{justifyCenter:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z"}},{justifyRight:{viewBox:"0 0 1792 1792",d:"M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z"}}]},attachments:{menu:{viewBox:"0 0 1792 1792",d:"M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"},group:[{attachment:{viewBox:"0 0 1792 1792",d:"M1596 1385q0 117-79 196t-196 79q-135 0-235-100l-777-776q-113-115-113-271 0-159 110-270t269-111q158 0 273 113l605 606q10 10 10 22 0 16-30.5 46.5t-46.5 30.5q-13 0-23-10l-606-607q-79-77-181-77-106 0-179 75t-73 181q0 105 76 181l776 777q63 63 145 63 64 0 106-42t42-106q0-82-63-145l-581-581q-26-24-60-24-29 0-48 19t-19 48q0 32 25 59l410 410q10 10 10 22 0 16-31 47t-47 31q-12 0-22-10l-410-410q-63-61-63-149 0-82 57-139t139-57q88 0 149 63l581 581q100 98 100 235z"}},{link:{viewBox:"0 0 1792 1792",d:"M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"}},{image:{viewBox:"0 0 2048 1792",d:"M704 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448h-1408v-192l320-320 160 160 512-512zm96-704h-1600q-13 0-22.5 9.5t-9.5 22.5v1216q0 13 9.5 22.5t22.5 9.5h1600q13 0 22.5-9.5t9.5-22.5v-1216q0-13-9.5-22.5t-22.5-9.5zm160 32v1216q0 66-47 113t-113 47h-1600q-66 0-113-47t-47-113v-1216q0-66 47-113t113-47h1600q66 0 113 47t47 113z"}}]}},r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=new Range,this.files=[],this.optionGroups=l,n?(this.options=n,n.fontPack||(this.options.fontPack=i),n.extensions||(this.options.extensions=o)):this.options={fontPack:i,extensions:o},this.initEditor(e),this.initResponsive(),this.initOverflow()}var r,a,s;return r=t,(a=[{key:"initEditor",value:function(t){var e=this;this.editor=t,this.toolbar=this.initToolbar(),this.body=this.initBody(),this.linkMenu=this.initLinkMenu(),this.imageMenu=this.initImageMenu(),this.metaDataSection=this.initMetaDataSection(),this.filesSection=this.initFilesSection(),this.editor.style.border="2px solid #ddd",this.editor.style.display="flex",this.editor.style.position="relative",this.editor.style.flexDirection="column",this.editor.style.fontFamily="Arial",this.editor.style.minHeight="auto",this.editor.style.maxHeight="auto",this.editor.style.maxWidth="100%",this.options.toolbarHide&&(this.toolbarSend.style.display="none",this.toolbarOptionsGroup.style.display="none",this.body.onfocus=function(){e.overflow(),e.toolbarSlideUp()},this.body.onblur=function(){e.overflow(),setTimeout((function(){document.activeElement!==e.body&&document.activeElement!==e.linkMenu.querySelector("input")&&document.activeElement!==e.imageMenu.querySelectorAll("input")[0]&&document.activeElement!==e.imageMenu.querySelectorAll("input")[1]&&document.activeElement!==e.imageMenu.querySelectorAll("input")[2]&&e.toolbarSlideDown()}),2e3)}),this.toolbarOptions.forEach((function(t){t.style.cursor="pointer",t.style.userSelect="none",t.onclick=function(n){e.body.focus();var o=t.id.split("-")[1];switch(o){case"insertOrderedList":case"insertUnorderedList":document.execCommand("indent",!0),document.execCommand(o,!0);break;case"attachment":var i=document.createElement("input");i.style.display="none",i.type="file",i.click(),i.onchange=function(t){return e.attachFile(i.files[0])};break;case"link":"true"===e.linkMenu.dataset.active?e.closeLinkMenu():(e.openLinkMenu(),e.range=e.getRange(),e.linkMenu.querySelector("input").focus());break;case"image":"true"===e.imageMenu.dataset.active?e.closeImageMenu():(e.openImageMenu(),e.range=e.getRange(),e.imageMenu.querySelector("input").focus());break;default:document.execCommand(o,!0)}}})),this.editor.getcontent=function(){return e.getContent()},this.editor.getrange=function(){return e.getRange()},this.editor.appendChild(this.toolbar),this.editor.appendChild(this.body),this.editor.appendChild(this.linkMenu),this.editor.appendChild(this.imageMenu),this.editor.appendChild(this.metaDataSection),this.editor.appendChild(this.filesSection),this.options.toolbarBottom&&(this.editor.removeChild(this.toolbar),this.editor.append(this.toolbar))}},{key:"toolbarSlideUp",value:function(){var t=this,e=this.toolbar.offsetHeight,n=setInterval((function(){e>=40?(t.options.onToolbarSend&&(t.toolbarSend.style.display="flex"),t.toolbarOptionsGroup.style.display="flex",clearInterval(n)):(e++,t.toolbar.style.minHeight="".concat(e,"px"))}),5)}},{key:"toolbarSlideDown",value:function(){var t=this;this.options.onToolbarSend&&(this.toolbarSend.style.display="none"),this.toolbarOptionsGroup.style.display="none";var e=40,n=setInterval((function(){0===e?clearInterval(n):(e--,t.toolbar.style.minHeight="".concat(e,"px"))}),5)}},{key:"initToolbar",value:function(){var t=this,n=document.createElement("div");this.toolbarOptionsGroup=document.createElement("div");var o=Object.keys(this.optionGroups);n.classList.add("toolbar"),n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.flexWrap="wrap",n.style.minHeight=this.options.toolbarHide?"0":"40px",n.style.position="relative",this.toolbarOptionsGroup.classList.add("toolbar-options"),this.toolbarOptionsGroup.style.margin="0 10px",this.toolbarOptionsGroup.style.display=this.options.toolbarHide?"none":"flex",o.forEach((function(e){var n=document.createElement("div");n.classList.add("toolbar-menu"),n.id="menu-".concat(e),n.appendChild(t.constructSVG(t.optionGroups[e].menu)),t.toolbarOptionsGroup.appendChild(n);var o=document.createElement("div");o.classList.add("toolbar-group"),o.id="group-".concat(e),t.optionGroups[e].group.forEach((function(e){var n=Object.keys(e)[0],i=t.constructSVG(e[n]);i.id="toolbar-".concat(n),i.style.margin="0 10px",o.appendChild(i)})),t.toolbarOptionsGroup.appendChild(o)})),n.appendChild(this.toolbarOptionsGroup);var i=document.createElement("div");i.id="toolbar-send",i.style.display="none",i.style.color="#fff",i.style.backgroundColor="#5cb85c",i.style.minHeight=this.options.toolbarHide?"40px":this.toolbar.style.minHeight,i.style.width="50px",i.style.textAlign="center",i.style.justifyContent="center",i.style.alignContent="center",i.style.alignItems="center",i.style.cursor="pointer",i.style.border="1px solid #4cae4c",i.style.alignSelf="flex-end",this.options.onToolbarSend&&(i.onclick=function(){return t.options.onToolbarSend()}),this.options.onToolbarSend&&!this.options.toolbarHide&&(i.style.display="flex"),i.onmouseenter=function(){return i.style.backgroundColor="#4cae4c"},i.onmouseleave=function(){return i.style.backgroundColor="#5cb85c"};var l=this.constructSVG({viewBox:"0 0 1792 1792",d:"M1764 11q33 24 27 64l-256 1536q-5 29-32 45-14 8-31 8-11 0-24-5l-453-185-242 295q-18 23-49 23-13 0-22-4-19-7-30.5-23.5t-11.5-36.5v-349l864-1059-1069 925-395-162q-37-14-40-55-2-40 32-59l1664-960q15-9 32-9 20 0 36 11z"});return l.querySelector("path").setAttribute("fill","#fff"),i.appendChild(l),n.appendChild(i),this.toolbarOptions=n.querySelectorAll("span"),this.toolbarGroups=e(n.getElementsByClassName("toolbar-group")),this.toolbarMenus=e(n.getElementsByClassName("toolbar-menu")),this.toolbarSend=n.querySelector("#toolbar-send"),n}},{key:"initBody",value:function(){var t=this,e=document.createElement("div");return e.classList.add("body"),e.contentEditable="true",e.style.outline="none",e.style.padding="10px 20px",e.style.height=this.editor.style.height,e.style.minHeight=this.editor.style.minHeight,e.style.maxHeight=this.editor.style.maxHeight,e.onpaste=function(e){var n;e.clipboardData.files.length>0&&e.clipboardData.files[0].type.includes("image")&&(n=e.clipboardData.files[0],new Promise((function(t,e){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return t(o.result)},o.onerror=function(t){return e(t)}}))).then((function(e){document.execCommand("insertImage",!0,e),t.options.uploadOnPaste&&t.attachFile(function(t,e){for(var n=t.split(","),o=n[0].match(/:(.*?);/)[1],i=atob(n[1]),l=i.length,r=new Uint8Array(l);l--;)r[l]=i.charCodeAt(l);var a=new File([r],e,{type:o});return new File([r],"".concat(a.name,".").concat(a.type.split("/").pop()),{type:a.type})}(e,"pastedimage")),t.overflow()})),e.clipboardData.items.length>0&&"text/plain"===e.clipboardData.items[0].type&&e.clipboardData.items[0].getAsString((function(e){t.options.metaUrl&&t.validURL(e)&&t.getMeta(e).then((function(e){var n=e.url,o=e.title,i=e.image,l=e.description;n&&o&&i&&t.createMetaDataElement(n,i,o,l)}))})),t.overflow()},e}},{key:"initLinkMenu",value:function(){var t=this,e=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("p"),l=document.createElement("input");return e.id="link-menu",o.textContent="Insert Link",i.textContent="Web Address",l.type="text",i.style.margin="8px 10px 8px 0",i.style.fontSize="14px",o.style.cursor="pointer",e.dataset.active="false",e.style.display="none",e.style.position="absolute",e.style.right="10px",e.style.bottom="10px",e.style.backgroundColor="#fff",e.style.border="2px solid #ddd",e.style.padding="10px 20px",e.style.zIndex="1000",i.style.width="100%",i.style.textAlign="right",i.style.marginRight="10px",l.style.outline="none",l.style.padding="0 5px",l.placeholder="Insert a Link",n.style.display="flex",n.style.justifyContent="space-between",n.style.margin="5px 0",o.style.float="right",o.style.padding="6px 12px",o.style.border="1px solid #4cae4c",o.style.backgroundColor="#5cb85c",o.style.fontSize="14px",o.style.color="#fff",o.style.outline="none",o.onmouseenter=function(){return o.style.backgroundColor="#4cae4c"},o.onmouseleave=function(){return o.style.backgroundColor="#5cb85c"},o.onclick=function(e){var n=l.value;if(n){window.getSelection().removeAllRanges(),window.getSelection().addRange(t.range),document.execCommand("createLink",!0,n),t.options.metaUrl&&t.validURL(n)&&t.getMeta(n).then((function(e){var n=e.url,o=e.image,i=e.title,l=e.description;n&&o&&i&&t.createMetaDataElement(n,o,i,l)}));var o=t.body.querySelectorAll("a");o[o.length-1].contentEditable="false",l.value="",t.toolbar.querySelector("#toolbar-link").onclick()}else t.body.focus(),t.closeLinkMenu()},n.appendChild(i),n.appendChild(l),e.appendChild(n),e.appendChild(o),e}},{key:"initImageMenu",value:function(){var t=this,e=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button"),i=document.createElement("p"),l=document.createElement("input");e.id="image-menu",o.textContent="Insert Image",i.textContent="Image URL",l.type="text",i.style.margin="8px 10px 8px 0",i.style.fontSize="14px",o.style.cursor="pointer",e.dataset.active="false",e.style.display="none",e.style.position="absolute",e.style.right="10px",e.style.bottom="10px",e.style.backgroundColor="#fff",e.style.border="2px solid #ddd",e.style.padding="10px 20px",e.style.zIndex="1000",i.style.width="100%",i.style.textAlign="right",i.style.marginRight="10px",l.style.outline="none",l.style.padding="0 5px",l.placeholder="Insert a Link",n.style.display="flex",n.style.justifyContent="space-between",n.style.margin="5px 0",o.style.float="right",o.style.padding="6px 12px",o.style.border="1px solid #4cae4c",o.style.backgroundColor="#5cb85c",o.style.fontSize="14px",o.style.color="#fff",o.style.outline="none",o.onmouseenter=function(){return o.style.backgroundColor="#4cae4c"},o.onmouseleave=function(){return o.style.backgroundColor="#5cb85c"},n.appendChild(i),n.appendChild(l);var r=n.cloneNode(!0),a=r.querySelector("input"),s=r.querySelector("p");a.placeholder="Image Height",s.textContent="Height";var d=n.cloneNode(!0),c=d.querySelector("input"),u=d.querySelector("p");return c.placeholder="Image Height",u.textContent="Width",o.onclick=function(e){var n=l.value,o=a.value,i=c.value;if(n){window.getSelection().removeAllRanges(),window.getSelection().addRange(t.range),document.execCommand("insertImage",!0,n);var r=t.body.querySelectorAll("img");r[r.length-1].style.height="".concat(o,"px"),r[r.length-1].style.width="".concat(i,"px"),a.value="",c.value="",l.value="",t.toolbar.querySelector("#toolbar-image").onclick()}else t.body.focus(),t.closeImageMenu()},e.appendChild(r),e.appendChild(d),e.appendChild(n),e.appendChild(o),e}},{key:"initMetaDataSection",value:function(){var t=document.createElement("div");return t.classList.add("metadata-section"),t.style.display="flex",t.style.flexWrap="wrap",t.style.zIndex="500",t}},{key:"initFilesSection",value:function(){var t=this,e=document.createElement("div");return e.classList.add("files-section"),e.style.display="flex",e.style.flexWrap="wrap",e.style.zIndex="500",this.body.ondragenter=function(e){t.body.style.backgroundColor="#ddd"},this.body.ondragleave=function(e){t.body.style.backgroundColor="inherit"},this.body.ondrop=function(e){t.body.style.backgroundColor="inherit",e.preventDefault();var n=e.dataTransfer.files&&e.dataTransfer.files[0];t.attachFile(n)},this.editor.getfiles=function(){return t.getFiles()},e}},{key:"createFileElement",value:function(t,e){var n=this,o=document.createElement("div"),i=document.createElement("h4"),l=document.createElement("p"),r=document.createElement("p");i.textContent=t,l.textContent=e,r.textContent="X",o.dataset.fileindex=this.files.length-1,o.style.width="100%",o.style.display="flex",o.style.flexDirection="column",o.style.margin="10px",o.style.position="relative",i.style.fontWeight="bold",i.style.margin="0",l.style.fontSize="12px",l.style.margin="2px 0",r.style.margin="0",r.style.userSelect="none",r.style.color="black",r.style.position="absolute",r.style.right="5px",r.style.top="-5px",r.style.cursor="pointer",r.style.backgroundColor="#fff",r.onmouseenter=function(){return r.style.color="#ddd"},r.onmouseleave=function(){return r.style.color="black"},r.onclick=function(t){n.files.splice(t.target.parentElement.dataset.fileindex,1),t.target.parentElement.remove()},o.appendChild(i),o.appendChild(l),o.appendChild(r),this.filesSection.appendChild(o),this.editor.getfiles=function(){return n.getFiles()}}},{key:"createMetaDataElement",value:function(t,e,n,o){var i=document.createElement("div"),l=document.createElement("a"),r=document.createElement("img"),a=document.createElement("div"),s=document.createElement("h4"),d=document.createElement("p"),c=document.createElement("span");l.href=t,r.src=e,s.textContent=n,d.textContent=o,c.textContent="X",l.target="blank",i.style.width="100%",i.style.display="flex",i.style.margin="10px",i.style.position="relative",r.style.marginRight="10px",r.style.height="50px",r.style.width="75px",s.style.fontWeight="bold",s.style.margin="0",d.style.margin="0",c.style.userSelect="none",c.style.color="black",c.style.position="absolute",c.style.right="5px",c.style.top="-5px",c.style.cursor="pointer",c.style.backgroundColor="#fff",c.onmouseenter=function(){return c.style.color="#ddd"},c.onmouseleave=function(){return c.style.color="black"},c.onclick=function(t){return t.target.parentElement.remove()},l.appendChild(r),a.appendChild(s),a.appendChild(d),i.appendChild(l),i.appendChild(a),i.appendChild(c),this.metaDataSection.appendChild(i)}},{key:"constructSVG",value:function(t){var e=t.viewBox,n=t.d,o=this.options.toolbarOptionFillColor?this.options.toolbarOptionFillColor:"#333",i=document.createElement("span"),l='<svg width="'.concat("16",'" height="').concat("16",'" viewBox="').concat(e,'" xmlns="').concat("http://www.w3.org/2000/svg",'">'),r='<path fill="'.concat(o,'" d="').concat(n,'"/>');return i.innerHTML="".concat(l).concat(r,"</svg>"),i}},{key:"initResponsive",value:function(){var t=this,e=this;if(this.options.minimal)this.toolbarMenus.forEach((function(t){return t.style.display="none"})),this.toolbar.querySelector("#toolbar-strikethrough").style.display="none",this.toolbar.querySelector("#toolbar-image").style.display="none",this.toolbar.querySelector("#toolbar-insertOrderedList").style.display="none",this.toolbar.querySelector("#group-textAlign").style.display="none";else{var n=function(t){e.toolbarGroups.forEach((function(e){e.dataset.open="false",e.style.display=t?"none":"block",e.style.position=t?"absolute":"relative",e.style.bottom=t?"5px":"inherit",e.style.right=t?"5px":"inherit",e.style.backgroundColor=t?"#fff":"inherit",e.style.border=t?"2px solid #ddd":"none"})),e.toolbarMenus.forEach((function(n){n.style.padding="0 10px",n.style.cursor="pointer",n.style.userSelect="none",n.style.display=t?"block":"none",n.onclick=function(t){var o;"false"===(o=e.toolbar.querySelector("#group-".concat(n.id.split("-")[1]))).dataset.open?(e.toolbarGroups.forEach((function(t){"true"===t.dataset.open&&(t.style.display="none",t.dataset.open="false")})),o.style.display="block",o.style.padding="5px",o.dataset.open="true"):(o.style.display="none",o.dataset.open="false"),e.body.focus()}}))},o=function(){i=window.matchMedia("(max-width: 700px)").matches,n(i)},i=window.matchMedia("(max-width: 700px)").matches;o(),window.onresize=function(){t.toolbarGroups.forEach((function(t){return t.style.padding="0"})),t.closeLinkMenu(),t.closeImageMenu(),o()}}}},{key:"initOverflow",value:function(){var t=this,e=this.body.onfocus;this.body.onfocus=function(){e&&e(),t.overflow()};var n=this.body.onblur;this.body.onblur=function(){n&&n(),t.overflow()},this.body.onkeypress=function(){return t.overflow()}}},{key:"getFiles",value:function(){return this.files}},{key:"getContent",value:function(){return this.body.innerHTML}},{key:"getRange",value:function(){return window.getSelection().getRangeAt(0)}},{key:"getMeta",value:function(t){return fetch(this.options.metaUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetUrl:t})}).then((function(t){return t.json()}))}},{key:"validURL",value:function(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}},{key:"overflow",value:function(){var t=this.body;t.scrollHeight>t.clientHeight?t.style.overflowY="scroll":t.style.overflowY="hidden",t.scrollWidth>t.clientWidth?t.style.overflowX="scroll":t.style.overflowX="hidden"}},{key:"formatBytes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var n=1024,o=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,l)).toFixed(o))+" "+i[l]}},{key:"validateFile",value:function(t){var e=t.type.split("/").pop();return this.options.extensions.includes(".".concat(e))}},{key:"attachFile",value:function(t){this.validateFile(t)?(this.files.push(t),this.createFileElement(t.name,this.formatBytes(t.size))):this.fileInvalid()}},{key:"fileInvalid",value:function(){var t=this;this.body.style.transition="background-color .5s",this.body.style.backgroundColor="#d9534f",setTimeout((function(){t.body.style.backgroundColor="inherit",setTimeout((function(){return t.body.style.transition="none"}),500)}),500)}},{key:"openLinkMenu",value:function(){this.closeImageMenu(),this.linkMenu.dataset.active="true",this.linkMenu.style.display="block"}},{key:"openImageMenu",value:function(){this.closeLinkMenu(),this.imageMenu.dataset.active="true",this.imageMenu.style.display="block"}},{key:"closeLinkMenu",value:function(){this.linkMenu.dataset.active="false",this.linkMenu.style.display="none"}},{key:"closeImageMenu",value:function(){this.imageMenu.dataset.active="false",this.imageMenu.style.display="none"}}])&&n(r.prototype,a),s&&n(r,s),t}();t.default=r})?o.apply(e,i):o)||(t.exports=l)}])}));